#!/bin/sh

if test ! -e config.mk
then
	printf '%s\n' 'Generating config.mk from defaults...' \
	              '(edit it for customization and then re-run this script)'
	trap "rm -f $$.mk" 0 2 3
	(cat config.mk.def
	sed -n '/^# '`uname`'/,/^$/p' system.mk) > $$.mk &&
	mv $$.mk config.mk
fi

printf 'Generating arch-dependant build files...\n'
make dep > /dev/null &&
printf 'You can now install scc with “make install”\n'
